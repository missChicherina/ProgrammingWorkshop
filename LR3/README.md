# Лабораторная работа №3 "Эхо-сервер"

## Задания для выполнения:
* Создать простой TCP-сервер, который принимает от клиента строку (порциями по 1 КБ) и возвращает ее. (Эхо-сервер).
* Сервер должен выводить в консоль служебные сообщения (с пояснениями) при наступлении любых событий:
* Запуск сервера;
* Начало прослушивания порта;
* Подключение клиента;
* Прием данных от клиента;
* Отправка данных клиенту;
* Отключение клиента;
* Остановка сервера.
* Напишите простой TCP-клиент, который устанавливает соединение с сервером, считывает строку со стандартного ввода и посылает его серверу.
* Клиент должен выводить в консоль служебные сообщения (с пояснениями) при наступлении любых событий:
* Соединение с сервером;
* Разрыв соединения с сервером;
* Отправка данных серверу;
* Прием данных от сервера.

## Задания для самостоятельного выполнения
3. Модифицируйте код сервера таким образом, чтобы при разрыве соединения клиентом он продолжал слушать данный порт и, таким образом, был доступен для повторного подключения.
4. Модифицируйте код клиента и сервера таким образом, чтобы номер порта и имя хоста (для клиента) они спрашивали у пользователя. Реализовать безопасный ввод данных и значения по умолчанию.
5. Модифицировать код сервера таким образом, чтобы все служебные сообщения выводились не в консоль, а в специальный лог-файл.
6. Модифицируйте код сервера таким образом, чтобы он автоматически изменял номер порта, если он уже занят. Сервер должен выводить в консоль номер порта, который он слушает.
7. Реализовать сервер идентификации. Сервер должен принимать соединения от клиента и проверять, известен ли ему уже этот клиент (по IP-адресу). Если известен, то поприветствовать его по имени. Если неизвестен, то запросить у пользователя имя и записать его в файл. Файл хранить в произвольном формате.
8. Реализовать сервер аутентификации. Похоже на предыдущее задание, но вместе с именем пользователя сервер отслеживает и проверяет пароли. Дополнительные баллы за безопасное хранение паролей. Дополнительные баллы за поддержание сессии на основе токена наподобие cookies
9. Напишите вспомогательные функции, которые реализуют отправку и принятие текстовых сообщений в сокет. Функция отправки должна дополнять сообщение заголовком фиксированной длины, в котором содержится информация о длине сообщения. Функция принятия должна читать сообщение с учетом заголовка. В дополнении реализуйте преобразование строки в байтовый массив и обратно в этих же функциях. Дополнително оценивается, если эти функции будут реализованы как унаследованное расширение класса socket библиотеки socket.
10. Дополните код клиента и сервера таким образом, чтобы они могли посылать друг другу множественные сообщения один в ответ на другое.
11. Напишите многопользовательский чат. Подсказка: используйте сокеты, основанные на протоколе UDP.

## Контрольные вопросы

Чем отличаются клиентские и серверные сокеты?
> Ответ: их главное отличие в том, что к серверным сокетам могут подключаться несколько клиентов, а клиентские сокеты могут подключаться к своим конкретным серверным сокетам.

Как можно передать через сокеты текстовую информацию?
> Ответ: превратить в байт код и передать информацию при помощи функций send() или sendto()

Какие операции с сокетами блокируют выполнение программы?
> Ответ: (на клиенте) получение информации от сервера, (на сервере) получение информации от клиента

Что такое неблокирующие сокеты?
> Ответ: это сокеты, которые не блокируют програму, ожидая получения или отправки клиентских данных, а проверяют на наличие этих данных в буфере и сразу возвращают (в случае, если они есть), а если нет, то не прерывает работу программы, а возвращает 0 байт прочитанного кода

В чём преимущества и недостатки использования TCP по сравнению с UDP?
> Ответ: TCP позволяет обеспечить полную и корректную передачу данных, но уступает UDP в скорости передачи

Какие вызовы, связанные с сокетами, используются только на стороне сервера?
> Ответ: bind() — привязывает сокет к адресу address (инициализирует IP-адрес и порт), accept() — принимает соединение и блокирует приложение в ожидании сообщения от клиента

На каком уровне модели OSI работают сокеты?
> Ответ: транспортный 4-й уровень
